\section[Design an optimization strategy for long term planning]{Design an optimization strategy for long term planning}

\begin{frame}{Nodes}
	A node represents an interconnection point of different elements of the gas network where their flows converge.
	
	\begin{columns}[c,onlytextwidth] 

		\column{0.55\textwidth}
		\centering
		\includegraphics[width=\textwidth]{estructura_nodo}
		
		\column{0.4\textwidth}
		\begin{itemize}
			\item [$f_{iny}$] Injected flow.
			\item [$f_{dem}$] Demanded flow.
			\item [$f_{rest}$] Equivalent restoration flow of unmet demand.
			\item [$f_{N}$] Flow within the network (net flow).
		\end{itemize}
	\end{columns}
\end{frame}


\begin{frame}{Pipelines}
	Pipelines are the physical infrastructure through which gas is transported. They are characterized by the pair of nodes they connect and by their gas transport capacities. 
	
	\centering
	\includegraphics[width=0.6\textwidth]{estructura_gasoducto}
	
	\begin{itemize}
		\item [$f_{i,j}$] Flow transported through the pipeline.
		\item [$p_{i}$] Pressure at the suction node.
		\item [$p_{j}$] Pressure at the discharge node.
	\end{itemize}
	
\end{frame}


\begin{frame}{Compressors}
	Compressors, like pipelines, are elements that interconnect pairs of nodes and transport a flow of gas. Their role in the system is to increase the pressure at the discharge node relative to the suction node in order to transport gas over longer distances and compensate for pressure losses due to friction in the pipelines.
	
	\begin{columns}[c,onlytextwidth] 
		
		\column{0.4\textwidth}
		\begin{itemize}
			\item [$f_{i,j}$] Flow transported through the compressor.
			\item [$p_{i}$] Pressure at the suction node.
			\item [$p_{j}$] Pressure at the discharge node.
		\end{itemize}
		
		
		\column{0.55\textwidth}
		
		\centering
		\includegraphics[width=\textwidth]{estructura_compresor}
	\end{columns}
\end{frame}


\begin{frame}{Loss Function}
	The loss function represents the objective to be minimized in the optimization model. 
	It quantifies the total operational cost of the natural gas network, 
	combining injection, transport, compressor operation, and unmet demand costs.
	
	\[
	\mathcal{L} = 
	\sum_{w \in \mathcal{W}} \emph{C_{\text{iny}}^w} \cdot \emph{f_{\text{iny}}^w} \;+\;
	\sum_{p \in \mathcal{P}} \emph{C_{\text{trans}}^p} \cdot \emph{f_{\text{trans}}^p} \;+\;
	\sum_{c \in \mathcal{C}} \emph{C_{\text{trans}}^c} \cdot \emph{f_{\text{trans}}^c} \;+\;
	\sum_{i \in \mathcal{N}} \sum_{u \in \mathcal{U}} \emph{C_{\text{rest}}^{u,i}} \cdot \emph{f_{\text{rest}}^{u,i}}
	\]
	
	Each component is the product of a \emph{unit cost} and the corresponding \emph{flow}:

	\begin{columns}[T,onlytextwidth]
		
		\column{0.48\textwidth}
		\begin{itemize}
			\small
			\item Injection at node $w$: \emph{$C_{\text{iny}}^w$} (cost) by \emph{$f_{\text{iny}}^w$} (flow)
			\item Transport through pipeline $p$: \emph{$C_{\text{trans}}^p$} (cost) by \emph{$f_{\text{trans}}^p$} (flow)
		\end{itemize}
		
		\column{0.48\textwidth}
		\begin{itemize}
			\small
			\item Transport through compressor $c$: \emph{$C_{\text{trans}}^c$} (cost) by \emph{$f_{\text{trans}}^c$} (flow)
			\item Unmet demand at node $i$ for user $u$: \emph{$C_{\text{rest}}^{u,i}$} (cost) by \emph{$f_{\text{rest}}^{u,i}$} (flow)
		\end{itemize}
	\end{columns}

\end{frame}


\begin{frame}{Nonlinear Constraint: Weymouth Equation}
	\textbf{Challenge:}
	\[
	\text{sgn}(f_{\text{trans}}^p)\,(f_{\text{trans}}^p)^2 = K_p(p_i^2 - p_j^2)
	\]
	\begin{itemize}
		\item Nonlinear, nonconvex, and discontinuous (due to $\text{sgn}(\cdot)$).
		\item Difficult for conventional optimization methods.
	\end{itemize}
	
	\vspace{0.2cm}
	\textbf{Our Solution: MPCC}
	\begin{itemize}
		\item Complementarity constraints replace binary disjunctions.
		\item Continuous variables $f^+, f^-$ capture flow direction without mixed-integers.
		\item Lower complexity, avoids MIP, yet preserves sign behavior.
	\end{itemize}
	
	\vspace{0.2cm}
	\textbf{Solver: IPOPT}
	\begin{itemize}
		\item Interior-point method with line-search filter.
		\item Simultaneous primal-dual updates for robust convergence.
	\end{itemize}
\end{frame}




